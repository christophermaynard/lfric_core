[file:cubedsphere.nml]
compulsory=true

[file:planar.nml]
compulsory=true

[meta_info]
compulsory=true
ns=namelist/Configuration
sort-key=a01
title=Configuration

[meta_info=class]
compulsory=true
description=
!enumeration=true
help=
ns=namelist/Configuration
sort-key=
trigger=namelist:planar_mesh_generator:      'Planar' ;
       =file:planar.nml:                     'Planar' ;
       =namelist:cubedsphere_mesh_generator: 'Sphere' ;
       =file:cubedsphere.nml:                'Sphere' ;
value-titles=Planar, Sphere
values='Planar', 'Sphere'

#==============================================================================
# Cubesphere Mesh Generator
#==============================================================================
[namelist:cubedsphere_mesh_generator]
compulsory=true
description=Cubed-Sphere Mesh generation
ns=namelist/Configuration/Sphere
sort-key=Section-A01
title=Sphere

[namelist:cubedsphere_mesh_generator=do_rotate]
compulsory=false
description=If true then rotate mesh according to lat_north, lon_north, rotate_angle
!kind=default
sort-key=Panel-A02
type=logical

[namelist:cubedsphere_mesh_generator=edge_cells]
!bounds=namelist:cubedsphere_mesh_generator=nmeshes
compulsory=true
description=Number of edge cells per mesh panel
fail-if=this < 1 ;
       =len(this) != namelist:cubedsphere_mesh_generator=nmeshes ;
       =len(this) != len(namelist:cubedsphere_mesh_generator=mesh_names) ;
help=Cells on a panel edge, Cubed-Sphere is made up of 6 rectangular
    =panels with equal numbers of cells on each panels edge.
!kind=default
length=:
range=1:
sort-key=Panel-A04
type=integer

[namelist:cubedsphere_mesh_generator=lat_north]
compulsory=false
description=Number of smoothing iterations
help=Determines the radians the mesh is  rotated along latitude.
!kind=default
range=0:90
sort-key=Panel-A02
type=real

[namelist:cubedsphere_mesh_generator=lon_north]
compulsory=false
description=Number of smoothing iterations
help=Determines the radians the mesh is  rotated along longitude.
!kind=default
range=0:360
sort-key=Panel-A02
type=real

[namelist:cubedsphere_mesh_generator=mesh_filename]
compulsory=true
description=Filename of ugrid file to write cubed-sphere mesh data to.
sort-key=Panel-A01
!string_length=filename
type=character

[namelist:cubedsphere_mesh_generator=mesh_names]
!bounds=namelist:cubedsphere_mesh_generator=nmeshes
compulsory=true
description=Name(s) to assign mesh(es).
fail-if=len(this) < 1 ;
       =len(this) != namelist:cubedsphere_mesh_generator=nmeshes ;
       =len(this) != len(namelist:cubedsphere_mesh_generator=edge_cells) ;
help=These mesh names are used as variable names to identify
    =meshes in UGRID conformant, NetCDF output file.
length=:
sort-key=Panel-A05
!string_length=default
type=character

[namelist:cubedsphere_mesh_generator=nmeshes]
compulsory=true
description=Number of cubed-sphere meshes to produce.
fail-if=this < 1
help=If multiple meshes are requested ----something on how maps are created and configuration
!kind=default
range=1:
sort-key=Panel-A03
type=integer

[namelist:cubedsphere_mesh_generator=rotate_angle]
compulsory=false
description=Number of smoothing iterations
help=Determines the radians the mesh is  rotated along latitude.
!kind=default
range=0:
sort-key=Panel-A02
type=real

[namelist:cubedsphere_mesh_generator=smooth_passes]
compulsory=true
description=Number of smoothing iterations
fail-if=this < 0
help=Smoothing is only applied the highest resolution mesh in a run configuration.
!kind=default
range=0:
sort-key=Panel-A02
type=integer

#==============================================================================
# Planar Mesh Generator
#==============================================================================
[namelist:planar_mesh_generator]
compulsory=true
description=Planar mesh generation
ns=namelist/Configuration/Planar
sort-key=Section-A02
title=Planar

[namelist:planar_mesh_generator=domain_x]
compulsory=true
description=Domain size (x-direction)
fail-if=this <= 0.0
help=Grid domain size of mesh in x-direction, for even numbers of cells in x,
    =the mesh will be centred on y=0.0m. The same domain size will be applied
    =to requested meshes.
!kind=default
range=0.0:
sort-key=Panel-A02
type=real

[namelist:planar_mesh_generator=domain_y]
compulsory=true
description=Domain size (y-direction)
fail-if=this <= 0.0
help=Grid domain size of mesh in y-direction, for even numbers of cells in y,
    =the mesh will be centred on x=0.0m. The same domain size will be applied
    =to requested meshes.
!kind=default
range=0.0:
sort-key=Panel-A03
type=real

[namelist:planar_mesh_generator=edge_cells_x]
!bounds=namelist:planar_mesh_generator=nmeshes
compulsory=true
description=Number of edges cells in x-axis for each mesh.
fail-if=this < 2 and namelist:planar_mesh_generator=periodic_x == ".true."  ;
       =this < 1 ;
       =len(this) != namelist:planar_mesh_generator=nmeshes ;
       =len(this) != len(namelist:planar_mesh_generator=mesh_names) ;
       =len(this) != len(namelist:planar_mesh_generator=edge_cells_y)
help=Edges cells are specified as a list of integers, one for each mesh requested.
    =In order to facilitate generation of intergrid mapping, adjacent meshes in the
    =list must have values were one is a factor of the other, e.g. 4,8,16.
    =
    =The minimum number of edge cells in the x direction for meshes which are
    =periodic in the x-axis is 2. This restriction is a limitation of the
    =science code.
!kind=default
length=:
range=1:
sort-key=Panel-A08
type=integer

[namelist:planar_mesh_generator=edge_cells_y]
!bounds=namelist:planar_mesh_generator=nmeshes
compulsory=true
description=Number of edges cells in y-axis for each mesh.
fail-if=this < 2 and namelist:planar_mesh_generator=periodic_y == ".true." ;
       =this < 1 ;
       =len(this) != namelist:planar_mesh_generator=nmeshes ;
       =len(this) != len(namelist:planar_mesh_generator=mesh_names) ;
       =len(this) != len(namelist:planar_mesh_generator=edge_cells_x)
help=Edges cells are specified as a list of integers, one for each mesh requested.
    =In order to facilitate generation of intergrid mapping, adjacent meshes in the
    =list must have values were one is a factor of the other, e.g. 4,8,16.
    =
    =The minimum number of edge cells in the y direction for meshes which are
    =periodic in the y-axis is 2. This restriction is a limitation of the
    =science code.
!kind=default
length=:
range=1:
sort-key=Panel-A09
type=integer

[namelist:planar_mesh_generator=mesh_filename]
compulsory=true
description=Filename of ugrid file to write planar mesh data to.
sort-key=Panel-A01
!string_length=filename
type=character

[namelist:planar_mesh_generator=mesh_names]
!bounds=namelist:planar_mesh_generator=nmeshes
compulsory=true
description=Name(s) to assign mesh(es).
fail-if=len(this) < 1 ;
       =len(this) != namelist:planar_mesh_generator=nmeshes ;
       =len(this) != len(namelist:planar_mesh_generator=edge_cells_x) ;
       =len(this) != len(namelist:planar_mesh_generator=edge_cells_y)
help=These mesh names are used as variable names to identify
    =meshes in UGRID conformant, NetCDF output file.
length=:
sort-key=Panel-A07
!string_length=default
type=character

[namelist:planar_mesh_generator=nmeshes]
compulsory=true
description=Number of planar meshes to produce.
fail-if=this < 1
help=Default behavior (under development) is that if there are multiple meshes specified,
    =the mesh generator will produce intergrid mesh maps in the UGRID output.
    =
    =It should be noted that if you wish to specify multiple meshes, then the number of
    =cells of neighbouring meshes (in a given direction) should be of an increasing
    =or decreasing integer factor.
!kind=default
range=1:
sort-key=Panel-A06
type=integer

[namelist:planar_mesh_generator=periodic_x]
compulsory=true
description=Periodic in x-axis
help=Specifies whether the topology of the mesh should be periodic in the x-axis.
    =Periodic in the x-axis will mean that outflow across the domain's Eastern
    =boundary would appear as inflow across the domain's  Western boundary and
    =vice versa.
!kind=default
sort-key=Panel-A04
type=logical

[namelist:planar_mesh_generator=periodic_y]
compulsory=true
description=Periodic in y-axis
help=Specifies whether the topology of the mesh should be periodic in the y-axis.
    =Periodic in the y-axis will mean that outflow across the domain's Northern
    =boundary would appear as inflow across the domain's Southern boundary and
    =vice versa.
!kind=default
sort-key=Panel-A05
type=logical
